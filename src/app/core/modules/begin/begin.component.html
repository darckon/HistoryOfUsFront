<mat-card class="dashboard-card">
    <mat-card-header class="mat-card-blue-header">
      <mat-card-title aria-label>
        <h2 class="blue" style="display: inline;"> Comienza tu Historia </h2>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="isLoading">
        <mat-spinner style="margin:0 auto;" mode="indeterminate"></mat-spinner>
      </div>
      <span *ngIf="!isLoading && dataLoaded" style="display: flex; flex-wrap: wrap; justify-content: space-between;width: 100%;">
        
          <mat-card style="flex-basis:45%; flex-grow: 1;">
            <mat-card-header>
              <mat-card-title>{{historias.nombre}}</mat-card-title>
            </mat-card-header>
            <mat-card-content style="min-height: 300px;">
              <img src="assets/images/banners/storys/story1.jpg" width="100%" alt="Historia 1">
            </mat-card-content>
          </mat-card>
    
          <mat-card style="flex-basis:45%; flex-grow: 1;">
            <mat-card-header>
              <mat-card-title>Progreso</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              
              <form [formGroup]="formGroup">
                <mat-horizontal-stepper  formArrayName="options">
                  <span *ngFor="let pregunta of preguntas">
                    <mat-step [formGroupName]="i" *ngFor="let customerGroup of formGroup.controls.options.controls; let i = index">
                      <ng-template matStepLabel>Step {{i + 1}}</ng-template>
                      <p>{{pregunta.descripcion}}</p>
                      <mat-selection-list formControlName="option"  (selectionChange)="change($event)">
                        <mat-list-option *ngFor="let alternativa of pregunta.alternativas_set" [value]="alternativa">
                          {{alternativa.descripcion}}
                        </mat-list-option>
                      </mat-selection-list>
                      <div>
                        <button mat-button matStepperPrevious>Back</button>
                        <button mat-button matStepperNext>Siguiente</button>
                      </div>
                    </mat-step>
                  </span>
                </mat-horizontal-stepper>
              </form>

              <p>
              <button style="display: block;width: 100%;text-align: left;" mat-button color="primary" routerLink="begin">
                <mat-icon>keyboard_arrow_right</mat-icon> Siguiente
              </button>
              <button *ngIf="formGroup.valid" mat-button (click)="guardarPerfil()">Guardar</button>
              </p>
            </mat-card-content>
          </mat-card>

      </span>
    </mat-card-content>
  </mat-card>