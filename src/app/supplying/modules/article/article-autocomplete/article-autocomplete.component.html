<form style="width: 100%;" [formGroup]="formGroup">
  <mat-form-field hideRequiredMarker="true" appearance="outline" style="width: 100%;" *ngIf="!_target">
    <input [disabled]="(!destination)" formControlName="article_text" style="width: 100%;" matInput
      placeholder="{{placeholder}}" [matAutocomplete]="auto">
  </mat-form-field>
  <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn" style="min-width: 600px;">
    <ng-container>

      <ng-container *ngIf="(articleList | async)?.data?.results as list">
        <ng-container *ngIf="!transferAutocompleteLoading">
          <mat-option *ngFor="let target of list" (onSelectionChange)="onSelectedTransferOption(target);"
            [value]="target">

            <p>
              <span><b>{{target.name}} <span class="blue" style="margin-left:5px;">{{target.code}}</span> </b></span>
            </p>
            <p>
              <span *ngIf="target.unity">
                Forma: <span class="blue">{{target.unity?.name}}</span>
              </span>
              <span *ngIf="target.priority">
                Prioridad:<span class="blue">{{target.priority?.name}}</span>
              </span>
              <span *ngIf="target.budget_item">
                Item presupuestario:<span class="blue">{{target.budget_item?.name}}</span>
              </span>
            </p>

          </mat-option>
        </ng-container>
      </ng-container>

      <mat-option *ngIf="transferAutocompleteLoading && formGroup.get('article_text')?.value?.length > 3">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </mat-option>
      <mat-option
        *ngIf="!transferAutocompleteLoading && formGroup.get('article_text')?.value?.length > 3 && (articleList | async)?.data.results.length == 0"
        style="width: 100%;" disabled>
        <span style="font-size: 12px;width: 100%;display: flex;align-content:space-around;">
          <p *ngIf="_service==false" style="color:gray">No se encontraron artículos.</p>
          <p *ngIf="_service==true" style="color:gray">No se encontraron servicios.</p>
        </span>
      </mat-option>
      <mat-option *ngIf="!transferAutocompleteLoading && formGroup.get('article_text')?.value?.length < 4"
        style="width: 100%;" disabled>
        <span>
          <p style="color:gray">Ingrese 4 o más carácteres para buscar.</p>
        </span>
      </mat-option>

    </ng-container>
  </mat-autocomplete>



  <mat-chip-list *ngIf="_target" style="width: 100% !important;height: fit-content !important;">
    <app-article-info style="width: 100% !important;height: fit-content !important;" [content-mode]="true" [name]="_target.name" [id]="_target.id" [code]="_target.code">
      <mat-chip selected class="mat-chip-list-stacked"  (removed)="removeTarget(); propagateChange();">
        <span class="info-title" style="margin-left: 15px; color: white;width:100%;"><b> Articulo:</b>   {{_target.name}} ({{_target.code}}) </span>
        <mat-icon matChipRemove>cancel</mat-icon>
      </mat-chip>
    </app-article-info>
  </mat-chip-list>


</form>
<br>